<!DOCTYPE html>
<html lang=“de“>
<head>
<meta charset=“UTF-8″ />
<title>Hex Color Picker aus Bild</title>
<style>
body {
font-family: system-ui, -apple-system, BlinkMacSystemFont, „Segoe UI“, sans-serif;
margin: 2rem;
background: #f5f5f5;
color: #222;
}

.wrapper {
max-width: 900px;
margin: 0 auto;
background: #fff;
padding: 1.5rem;
border-radius: 12px;
box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

h1 {
margin-top: 0;
font-size: 1.5rem;
}

.controls {
margin-bottom: 1rem;
display: flex;
flex-wrap: wrap;
gap: 1rem;
align-items: center;
}

canvas {
max-width: 100%;
border-radius: 8px;
border: 1px solid #ddd;
cursor: crosshair;
}

.result {
margin-top: 1rem;
display: flex;
align-items: center;
gap: 1rem;
flex-wrap: wrap;
}

.color-preview {
width: 40px;
height: 40px;
border-radius: 6px;
border: 1px solid #ccc;
background: transparent;
}

.hex-output {
font-family: „SF Mono“, Menlo, Monaco, Consolas, „Liberation Mono“, „Courier New“, monospace;
font-size: 1.1rem;
padding: 0.4rem 0.6rem;
border-radius: 6px;
border: 1px solid #ccc;
background: #fafafa;
}

button.copy-btn {
padding: 0.4rem 0.8rem;
border-radius: 6px;
border: none;
cursor: pointer;
background: #333;
color: #fff;
}

button.copy-btn:active {
transform: scale(0.97);
}

.hint {
font-size: 0.9rem;
color: #666;
margin-top: 0.4rem;
}
</style>
</head>
<body>
<div class=“wrapper“>
<h1>HEX-Farbpicker aus Bild</h1>
<div class=“controls“>
<label>
Bild wählen:
<input type=“file“ id=“imageLoader“ accept=“image/*“ />
</label>
<span class=“hint“>
Lade ein Bild hoch und klicke dann in das Bild, um den HEX-Code zu erhalten.
</span>
</div>

<canvas id=“imageCanvas“></canvas>

<div class=“result“>
<div class=“color-preview“ id=“colorPreview“></div>
<span class=“hex-output“ id=“hexOutput“>#——</span>
<button class=“copy-btn“ id=“copyBtn“ type=“button“>HEX kopieren</button>
</div>
<div class=“hint“ id=“coordInfo“></div>
</div>

<script>
const imageLoader = document.getElementById(‚imageLoader‘);
const canvas = document.getElementById(‚imageCanvas‘);
const ctx = canvas.getContext(‚2d‘);
const colorPreview = document.getElementById(‚colorPreview‘);
const hexOutput = document.getElementById(‚hexOutput‘);
const copyBtn = document.getElementById(‚copyBtn‘);
const coordInfo = document.getElementById(‚coordInfo‘);

let img = null;

// Bild laden und ins Canvas zeichnen
imageLoader.addEventListener(‚change‘, (e) => {
const file = e.target.files[0];
if (!file) return;

const reader = new FileReader();
reader.onload = function(evt) {
img = new Image();
img.onload = function() {
// Canvas auf Bildgröße setzen
canvas.width = img.naturalWidth;
canvas.height = img.naturalHeight;

// Bild in Originalgröße ins Canvas zeichnen
ctx.clearRect(0, 0, canvas.width, canvas.height);
ctx.drawImage(img, 0, 0);

coordInfo.textContent = `Bildgröße: ${canvas.width} × ${canvas.height}px – klicke ins Bild, um eine Farbe zu wählen.`;
};
img.src = evt.target.result;
};
reader.readAsDataURL(file);
});

// Klick im Canvas → Farbwert auslesen
canvas.addEventListener(‚click‘, (event) => {
if (!img) return;

const rect = canvas.getBoundingClientRect();

// Falls das Canvas im Layout skaliert ist, auf die interne Pixelgröße umrechnen
const scaleX = canvas.width / rect.width;
const scaleY = canvas.height / rect.height;

const x = Math.floor((event.clientX – rect.left) * scaleX);
const y = Math.floor((event.clientY – rect.top) * scaleY);

if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) return;

const pixel = ctx.getImageData(x, y, 1, 1).data; // [r, g, b, a]

const r = pixel[0];
const g = pixel[1];
const b = pixel[2];
const a = pixel[3]; // falls du später RGBA brauchst

const hex = rgbToHex(r, g, b);

colorPreview.style.backgroundColor = hex;
hexOutput.textContent = hex;
coordInfo.textContent = `Pixel bei (${x}, ${y}) – RGB(${r}, ${g}, ${b}), HEX: ${hex}`;
});

function componentToHex(c) {
const hex = c.toString(16);
return hex.length === 1 ? „0“ + hex : hex;
}

function rgbToHex(r, g, b) {
return „#“ + componentToHex(r) + componentToHex(g) + componentToHex(b);
}

// Button: HEX in die Zwischenablage kopieren
copyBtn.addEventListener(‚click‘, async () => {
const hex = hexOutput.textContent.trim();
if (!hex || !hex.startsWith(‚#‘)) return;

try {
await navigator.clipboard.writeText(hex);
copyBtn.textContent = ‚Kopiert!‘;
setTimeout(() => (copyBtn.textContent = ‚HEX kopieren‘), 1000);
} catch (err) {
alert(‚Konnte nicht kopieren. HEX-Code: ‚ + hex);
}
});
</script>
</body>
</html>
